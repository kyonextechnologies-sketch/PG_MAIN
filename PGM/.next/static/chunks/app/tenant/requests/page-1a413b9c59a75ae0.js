(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2046],{8661:(e,s,t)=>{Promise.resolve().then(t.bind(t,86119))},86119:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>E});var a=t(95155),r=t(12115),l=t(5634),i=t(11829),c=t(86948),n=t(3998),d=t(65142),o=t(76444),x=t(11647),h=t(11186),m=t(31120),u=t(52056),g=t(26983),b=t(42529),j=t(6191),N=t(16485),p=t(20508),y=t(57828),f=t(64269),v=t(74044),w=t(68796);function E(){let[e,s]=(0,r.useState)(!1),[t,E]=(0,r.useState)(""),[C,k]=(0,r.useState)("ALL"),[A,R]=(0,r.useState)({title:"",description:"",priority:"MEDIUM",category:"OTHER"}),{tickets:q,loading:T,error:S,createTicket:O,fetchTickets:M}=(0,v.Y)(),{addNotification:I}=(0,w.j)();r.useEffect(()=>{0===q.length&&M()},[q.length,M]);let L=async()=>{if(A.title&&A.description&&A.category)try{await O({title:A.title,description:A.description,priority:A.priority,category:A.category,status:"OPEN"})?(I({type:"success",title:"Request Created",message:"Your maintenance request has been submitted successfully!",read:!1}),s(!1),R({title:"",description:"",priority:"MEDIUM",category:"OTHER"})):I({type:"error",title:"Creation Failed",message:"Failed to create maintenance request. Please try again.",read:!1})}catch(e){I({type:"error",title:"Error",message:e.message||"An error occurred",read:!1})}else I({type:"error",title:"Validation Error",message:"Please fill in all required fields.",read:!1})};return(0,a.jsx)(i.m8,{role:"TENANT",children:(0,a.jsx)(l.O,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Maintenance Requests"}),(0,a.jsx)("p",{className:"text-gray-700 font-semibold",children:"Submit and track maintenance requests"})]}),(0,a.jsx)("div",{className:"bg-black rounded-lg p-2",children:(0,a.jsxs)(n.$,{onClick:()=>s(!0),children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4 text-white font-bold"}),(0,a.jsx)("p",{className:"text-xl font-medium text-white font-bold",children:"New Request"})]})})]}),e&&(0,a.jsxs)(c.Zp,{className:"bg-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,a.jsxs)(c.aR,{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-t-lg",children:[(0,a.jsx)(c.ZB,{className:"text-lg font-bold text-gray-900",children:"Create New Request"}),(0,a.jsx)(c.BT,{className:"text-sm text-gray-600 font-semibold",children:"Describe the issue you're experiencing"})]}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"title",className:"text-black font-bold",children:"Title"}),(0,a.jsx)(d.p,{className:"bg-white text-black border-1 margin-top-2",id:"title",value:A.title,onChange:e=>R({...A,title:e.target.value}),placeholder:"Brief description of the issue"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"description",className:"text-black font-bold",children:"Description"}),(0,a.jsx)(m.T,{className:"bg-white text-black border-1 margin-top-2",id:"description",value:A.description,onChange:e=>R({...A,description:e.target.value}),placeholder:"Provide detailed information about the issue...",rows:4})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"priority",className:"text-black font-bold",children:"Priority"}),(0,a.jsxs)(h.l6,{value:A.priority,onValueChange:e=>R({...A,priority:e}),children:[(0,a.jsx)(h.bq,{className:"bg-white text-black border-1 margin-top-2",children:(0,a.jsx)(h.yv,{placeholder:"Select priority"})}),(0,a.jsxs)(h.gC,{className:"bg-white text-black border-1 margin-top-2",children:[(0,a.jsx)(h.eb,{value:"LOW",children:"Low"}),(0,a.jsx)(h.eb,{value:"MEDIUM",children:"Medium"}),(0,a.jsx)(h.eb,{value:"HIGH",children:"High"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o.J,{htmlFor:"category",className:"text-black font-bold",children:"Category"}),(0,a.jsxs)(h.l6,{value:A.category,onValueChange:e=>R({...A,category:e}),children:[(0,a.jsx)(h.bq,{className:"bg-white text-black border-1 margin-top-2",children:(0,a.jsx)(h.yv,{placeholder:"Select category"})}),(0,a.jsxs)(h.gC,{className:"bg-white text-black border-1 margin-top-2",children:[(0,a.jsx)(h.eb,{value:"OTHER",children:"Other"}),(0,a.jsx)(h.eb,{value:"ELECTRICAL",children:"Electrical"}),(0,a.jsx)(h.eb,{value:"PLUMBING",children:"Plumbing"}),(0,a.jsx)(h.eb,{value:"MECHANICAL",children:"Mechanical"}),(0,a.jsx)(h.eb,{value:"CLEANING",children:"Cleaning"}),(0,a.jsx)(h.eb,{value:"SECURITY",children:"Security"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(n.$,{className:"bg-black text-white border-1 margin-top-2",onClick:L,disabled:!A.title||!A.description||!A.category,children:"Submit Request"}),(0,a.jsx)(n.$,{variant:"outline",onClick:()=>s(!1),children:"Cancel"})]})]})]}),(0,a.jsxs)(c.Zp,{className:"bg-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,a.jsxs)(c.aR,{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-t-lg",children:[(0,a.jsxs)(c.ZB,{className:"text-lg font-bold text-gray-900",children:["Your Requests (",q.length,")"]}),(0,a.jsx)(c.BT,{className:"text-sm text-gray-600 font-semibold",children:"Track the status of your maintenance requests"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:q.map(e=>(0,a.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 border border-gray-200 rounded-lg p-6 hover:shadow-md transition-all duration-300",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-4 text-black font-bold",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(e=>{switch(e){case"OPEN":return(0,a.jsx)(u.A,{className:"h-4 w-4 text-red-600"});case"IN_PROGRESS":return(0,a.jsx)(g.A,{className:"h-4 w-4 text-yellow-600"});case"RESOLVED":return(0,a.jsx)(b.A,{className:"h-4 w-4 text-green-600"});default:return(0,a.jsx)(g.A,{className:"h-4 w-4 text-gray-600"})}})(e.status)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(N.A,{className:"h-3 w-3 mr-1"}),"Created: ",(0,f.Yq)(e.createdAt)]}),e.assignedTo&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"h-3 w-3 mr-1"}),"Assigned to: ",e.assignedTo]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,a.jsx)(x.E,{className:(0,f.qY)(e.status),children:e.status}),(0,a.jsx)(x.E,{className:(0,f.eX)(e.priority),children:e.priority})]}),e.resolvedAt&&(0,a.jsxs)("div",{className:"text-xs text-green-600",children:["Resolved: ",(0,f.Yq)(e.resolvedAt)]})]}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>(e=>{let s=q.find(s=>s.id===e);s&&I({type:"info",title:"View Request",message:'Viewing details for "'.concat(s.title,'"...'),read:!1})})(e.id),className:"bg-green-500 text-white border-1 margin-top-2 hover:bg-black-600",children:(0,a.jsx)(y.A,{className:"h-3 w-3"})})]})]})},e.id))})})]})]})})})}}},e=>{e.O(0,[8779,8405,9420,4939,1486,9290,622,1097,2432,7979,1899,4450,9744,2322,433,2652,3494,2574,2903,9173,558,1356,309,4191,2834,957,6691,1151,9473,1172,7650,3976,6292,5848,8861,2076,7358],()=>e(e.s=8661)),_N_E=e.O()}]);