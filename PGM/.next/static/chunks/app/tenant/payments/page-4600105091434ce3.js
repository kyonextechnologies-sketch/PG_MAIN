(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3883],{48235:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(95155),l=s(12115),r=s(36489),n=s(20063),o=s(5634),c=s(11829),i=s(86948),d=s(3998),m=s(11647),x=s(35299),h=s(42529),p=s(6132),u=s(16485),b=s(91761),g=s(57828),y=s(64269),f=s(68796),j=s(52508),N=s(65229),v=s(78519),w=s(52056),P=s(5917),I=s(75426),k=s(93499);let C=[{id:"gpay",name:"Google Pay",icon:"\uD83D\uDFE2",color:"bg-green-50 border-green-200 hover:bg-green-100",textColor:"text-green-800",scheme:"tez://pay",fallbackUrl:"https://gpay.app.link"},{id:"phonepe",name:"PhonePe",icon:"\uD83D\uDFE3",color:"bg-purple-50 border-purple-200 hover:bg-purple-100",textColor:"text-purple-800",scheme:"phonepe://pay",fallbackUrl:"https://phonepe.com"},{id:"paytm",name:"Paytm",icon:"\uD83D\uDD35",color:"bg-blue-50 border-blue-200 hover:bg-blue-100",textColor:"text-blue-800",scheme:"paytm://pay",fallbackUrl:"https://paytm.com"},{id:"bharatpe",name:"BharatPe",icon:"\uD83D\uDFE0",color:"bg-orange-50 border-orange-200 hover:bg-orange-100",textColor:"text-orange-800",scheme:"bharatpe://pay",fallbackUrl:"https://bharatpe.com"},{id:"mobikwik",name:"MobiKwik",icon:"\uD83D\uDFE1",color:"bg-yellow-50 border-yellow-200 hover:bg-yellow-100",textColor:"text-yellow-800",scheme:"mobikwik://pay",fallbackUrl:"https://mobikwik.com"},{id:"amazonpay",name:"Amazon Pay",icon:"\uD83D\uDED2",color:"bg-orange-50 border-orange-200 hover:bg-orange-100",textColor:"text-orange-800",scheme:"amazonpay://pay",fallbackUrl:"https://amazon.in"},{id:"whatsapp",name:"WhatsApp Pay",icon:"\uD83D\uDCAC",color:"bg-green-50 border-green-200 hover:bg-green-100",textColor:"text-green-800",scheme:"whatsapp://pay",fallbackUrl:"https://whatsapp.com"}];function U(e){let{isOpen:t,onClose:s,invoice:r,upiId:n,upiName:o,onPaymentInitiated:c}=e,[m,x]=(0,l.useState)(null),[p,u]=(0,l.useState)(!1),[b,g]=(0,l.useState)(!1),[y,f]=(0,l.useState)(""),[U,A]=(0,l.useState)(!1),[D,S]=(0,l.useState)(!1),[R,E]=(0,l.useState)(null),[T,q]=(0,l.useState)(0),[_,O]=(0,l.useState)(null);if(!t)return null;let B=async()=>{let e="UPI ID: ".concat(n,"\nAmount: ₹").concat(r.amount,"\nNote: Rent payment for ").concat(r.month);try{await navigator.clipboard.writeText(e),u(!0),setTimeout(()=>u(!1),2e3)}catch(e){}},z=async()=>{if(!y.trim())return void alert("Please enter a valid UPI ID");if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+$/.test(y.trim()))return void alert("Please enter a valid UPI ID (e.g., user@paytm)");A(!0),E("pending"),q(300);try{let e=r.amount,t="Rent payment for ".concat(r.month),s="rent_".concat(Date.now()),a={payeeAddress:y.trim(),payeeName:o,amount:e,currency:"INR",transactionNote:t,transactionRef:s,merchantId:n,merchantName:o};try{if((await fetch("/api/upi/collect",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok);else throw Error("Failed to send UPI collect request")}catch(r){let a="pa=".concat(encodeURIComponent(y.trim()),"&pn=").concat(encodeURIComponent(o),"&am=").concat(e,"&cu=INR&tn=").concat(encodeURIComponent(t),"&tr=").concat(s),l="upi://pay?".concat(a);if(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))try{window.location.href=l}catch(t){let e=document.createElement("a");e.href=l,e.target="_self",e.style.display="none",document.body.appendChild(e),e.click(),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e3)}else window.open(l,"_blank")}S(!0);let l=setInterval(()=>{q(e=>e<=1?(clearInterval(l),E("failed"),S(!1),alert("Payment request timed out. Please try again."),0):e-1)},1e3);O(l),null==c||c("UPI Collect Request",r.amount)}catch(e){alert("Failed to send payment request. Please try again."),E(null),S(!1)}finally{A(!1)}},Z=e=>{let t=Math.floor(e/60);return"".concat(t,":").concat((e%60).toString().padStart(2,"0"))},F=()=>{_&&(clearInterval(_),O(null)),g(!1),x(null),f(""),S(!1),E(null),q(0),A(!1),s()};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,a.jsxs)(i.Zp,{className:"w-full max-w-2xl bg-white shadow-2xl border-0 max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(i.aR,{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-t-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(i.ZB,{className:"text-xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(j.A,{className:"h-6 w-6 mr-2 text-blue-600"}),"Choose UPI App"]}),(0,a.jsx)(i.BT,{className:"text-gray-700 font-semibold",children:"Select your preferred UPI app to make the payment"})]}),(0,a.jsx)(d.$,{variant:"outline",size:"icon",onClick:F,className:"hover:bg-red-50 hover:border-red-200",children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(i.Wu,{className:"p-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-3 sm:p-4 mb-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-3 text-sm sm:text-base",children:"Payment Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-xs sm:text-sm",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Amount:"}),(0,a.jsxs)("span",{className:"sm:ml-2 font-bold text-green-600 text-lg sm:text-base",children:["₹",r.amount.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Month:"}),(0,a.jsx)("span",{className:"sm:ml-2 font-bold text-gray-900",children:r.month})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"Payee:"}),(0,a.jsx)("span",{className:"sm:ml-2 font-bold text-gray-900 break-all",children:o})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:"UPI ID:"}),(0,a.jsx)("span",{className:"sm:ml-2 font-bold text-blue-600 break-all",children:n})]})]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-2",children:"Choose Your UPI App"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Select your preferred UPI app to make the payment"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:C.map(e=>(0,a.jsx)("button",{onClick:()=>(e=>{x(e);let t=C.find(t=>t.id===e);if(!t)return;let s=r.amount,a="Rent payment for ".concat(r.month),l="pa=".concat(encodeURIComponent(n),"&pn=").concat(encodeURIComponent(o),"&am=").concat(s,"&cu=INR&tn=").concat(encodeURIComponent(a)),i="",d="";if("upi"===e?(i="upi://pay?".concat(l),d="https://pay.upi.link/pay?".concat(l)):(i="".concat(t.scheme,"?").concat(l),d=t.fallbackUrl||"https://pay.upi.link/pay?".concat(l)),/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){let t=!1;try{window.location.href=i,t=!0}catch(e){}if(!t)try{let e=document.createElement("a");e.href=i,e.target="_self",e.style.display="none",document.body.appendChild(e),e.click(),t=!0,setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},1e3)}catch(e){}if(!t&&"upi"!==e)try{let e="upi://pay?".concat(l);window.location.href=e,t=!0}catch(e){}if(!t)try{window.open(d,"_blank")}catch(e){B()}}else try{window.open(i,"_blank")}catch(e){try{window.open(d,"_blank")}catch(e){B()}}setTimeout(()=>{null==c||c(t.name,s)},200),setTimeout(()=>{g(!0)},3e3)})(e.id),className:"p-3 sm:p-4 rounded-xl border-2 transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 ".concat(e.color," ").concat(m===e.id?"ring-2 ring-blue-500 border-blue-500 shadow-lg":"hover:shadow-md"),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl sm:text-3xl mb-1 sm:mb-2",children:e.icon}),(0,a.jsx)("div",{className:"font-semibold text-xs sm:text-sm ".concat(e.textColor),children:e.name}),m===e.id&&(0,a.jsx)("div",{className:"text-xs text-blue-600 font-medium mt-1",children:"Selected"})]})},e.id))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-900 mb-2",children:"Send Payment Request"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enter your UPI ID to receive a payment request"}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-lg p-4 border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{htmlFor:"customUpiId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your UPI ID"}),(0,a.jsx)("input",{id:"customUpiId",type:"text",value:y,onChange:e=>f(e.target.value),placeholder:"Enter your UPI ID (e.g., user@paytm)",className:"text-black w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",disabled:U||D}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Example: john@paytm, jane@phonepe, user@ybl"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(d.$,{onClick:z,disabled:!y.trim()||U||D,className:"w-full sm:w-auto bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:U?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):D?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Request Sent!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Send Request"]})})})]}),D&&"pending"===R&&(0,a.jsxs)("div",{className:"mt-3 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-yellow-600 mr-2"}),(0,a.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"Payment request sent!"})]}),(0,a.jsx)("div",{className:"text-lg font-bold text-yellow-800",children:Z(T)})]}),(0,a.jsxs)("p",{className:"text-xs text-yellow-700 mb-2",children:["A payment request has been sent to your UPI ID. Check your UPI app for the payment request. You have ",(0,a.jsx)("strong",{children:Z(T)})," to approve the payment."]}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mb-3",children:[(0,a.jsx)("strong",{children:"Amount:"})," ₹",r.amount," | ",(0,a.jsx)("strong",{children:"To:"})," ",y," | ",(0,a.jsx)("strong",{children:"From:"})," ",o]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-3",children:[(0,a.jsx)("p",{className:"text-xs text-blue-800 font-medium mb-1",children:"\uD83D\uDCF1 What to do next:"}),(0,a.jsxs)("ol",{className:"text-xs text-blue-700 space-y-1",children:[(0,a.jsx)("li",{children:"1. Check your UPI app (Google Pay, PhonePe, Paytm, etc.)"}),(0,a.jsxs)("li",{children:['2. Look for a payment request from "',o,'"']}),(0,a.jsxs)("li",{children:["3. Approve the payment of ₹",r.amount]}),(0,a.jsx)("li",{children:'4. Come back here and click "✓ I Approved Payment"'})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{_&&(clearInterval(_),O(null)),E("approved"),S(!1),q(0),null==c||c("Payment Approved",r.amount),setTimeout(()=>{s()},2e3)},className:"text-xs bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors font-medium",children:"✓ I Approved Payment"}),(0,a.jsx)("button",{onClick:()=>{_&&(clearInterval(_),O(null)),E("failed"),S(!1),q(0)},className:"text-xs bg-red-100 text-red-700 px-3 py-1 rounded hover:bg-red-200 transition-colors font-medium",children:"✗ Payment Failed"}),(0,a.jsx)("button",{onClick:()=>{let e="pa=".concat(encodeURIComponent(y.trim()),"&pn=").concat(encodeURIComponent(o),"&am=").concat(r.amount,"&cu=INR&tn=").concat(encodeURIComponent("Rent payment for ".concat(r.month)),"&tr=rent_").concat(Date.now());window.location.href="upi://pay?".concat(e)},className:"text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors font-medium",children:"\uD83D\uDD04 Try Again"})]})]}),"approved"===R&&(0,a.jsx)("div",{className:"mt-3 p-4 bg-green-50 rounded-lg border border-green-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"h-5 w-5 text-green-600 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Payment approved successfully!"}),(0,a.jsxs)("p",{className:"text-xs text-green-600",children:["Your rent payment of ₹",r.amount," has been processed."]})]})]})}),"failed"===R&&(0,a.jsx)("div",{className:"mt-3 p-4 bg-red-50 rounded-lg border border-red-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(w.A,{className:"h-5 w-5 text-red-600 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-800",children:"Payment request failed!"}),(0,a.jsx)("p",{className:"text-xs text-red-600",children:"The payment request timed out or was not approved. Please try again."})]})]})})]})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:"Manual Payment"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Copy UPI details to pay manually in any UPI app"})]}),(0,a.jsx)(d.$,{onClick:()=>{B()},variant:"outline",className:"flex items-center space-x-2 w-full sm:w-auto",size:"sm",children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-green-600",children:"Copied!"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Copy Details"})]})})]})}),b&&(0,a.jsxs)("div",{className:"mt-4 sm:mt-6 bg-yellow-50 rounded-lg p-3 sm:p-4 border border-yellow-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-yellow-900 mb-2 flex items-center text-sm sm:text-base",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"App didn't open?"]}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-yellow-800 mb-3",children:"If the UPI app didn't open automatically, you can:"}),(0,a.jsxs)("div",{className:"space-y-2 text-xs sm:text-sm text-yellow-800",children:[(0,a.jsx)("p",{children:"1. Open your UPI app manually"}),(0,a.jsx)("p",{children:'2. Use the "Copy Details" button below'}),(0,a.jsx)("p",{children:"3. Enter the UPI ID and amount in your app"})]})]}),(0,a.jsxs)("div",{className:"mt-4 sm:mt-6 bg-blue-50 rounded-lg p-3 sm:p-4 border border-blue-200",children:[(0,a.jsxs)("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center text-sm sm:text-base",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-2"}),"How to Pay"]}),(0,a.jsxs)("ol",{className:"text-xs sm:text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"1. Select your preferred UPI app above"}),(0,a.jsx)("li",{children:"2. The app will open with payment details pre-filled"}),(0,a.jsx)("li",{children:"3. Complete the payment in the UPI app"}),(0,a.jsx)("li",{children:"4. Return to this page to confirm payment"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 mt-4 sm:mt-6",children:[(0,a.jsx)(d.$,{variant:"outline",onClick:F,className:"w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)(d.$,{onClick:F,className:"bg-green-600 hover:bg-green-700 text-white w-full sm:w-auto",children:"Payment Complete"})]})]})]})})}var A=s(57760);function D(e){var t,s;return!!((null==e||null==(t=e.user)?void 0:t.id)&&(null==e||null==(s=e.user)?void 0:s.email))}function S(){let{data:e,status:t}=(0,r.useSession)(),s=(0,n.useRouter)(),{addNotification:j}=(0,f.j)(),{invoices:N,loading:v,error:w}=(0,A.W)(),{settings:P}=function(){let[e,t]=(0,l.useState)({upiId:"owner@paytm",upiName:"Smart PG Manager"});return(0,l.useEffect)(()=>{let e=localStorage.getItem("upiSettings");if(e)try{let s=JSON.parse(e),a=setTimeout(()=>{t(s)},0);return()=>clearTimeout(a)}catch(e){}},[]),{settings:e,updateSettings:e=>{t(e),localStorage.setItem("upiSettings",JSON.stringify(e))}}}(),[I,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{if("loading"!==t&&("unauthenticated"===t||!D(e))){s.push("/login"),j({type:"error",title:"Authentication Required",message:"Please log in to view payments",read:!1});return}},[t,e,s,j]),"loading"===t||!D(e))return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.A,{className:"h-12 w-12 animate-spin mx-auto text-blue-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading..."})]})});let R=N.filter(e=>"PAID"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0),E=N.filter(e=>"DUE"===e.status||"OVERDUE"===e.status).reduce((e,t)=>e+(Number(t.amount)||0),0),T=N.find(e=>"DUE"===e.status);return(0,a.jsx)(c.m8,{role:"TENANT",children:(0,a.jsx)(o.O,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Payment Management"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Track and manage your payments"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)(i.Zp,{className:"bg-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,a.jsxs)(i.aR,{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-bold text-green-800",children:"Total Paid"}),(0,a.jsx)("div",{className:"p-2 bg-green-500 rounded-lg w-fit mt-2",children:(0,a.jsx)(h.A,{className:"h-4 w-4 text-white"})})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-900",children:(0,y.vv)(R)}),(0,a.jsx)("p",{className:"text-sm text-green-700 font-bold",children:"Payments completed"})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,a.jsxs)(i.aR,{className:"bg-gradient-to-r from-red-50 to-yellow-50 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-bold text-red-800",children:"Outstanding Due"}),(0,a.jsx)("div",{className:"p-2 bg-red-500 rounded-lg w-fit mt-2",children:(0,a.jsx)(p.A,{className:"h-4 w-4 text-white"})})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-red-900",children:(0,y.vv)(E)}),(0,a.jsx)("p",{className:"text-sm text-red-700 font-bold",children:"Awaiting payment"})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,a.jsxs)(i.aR,{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-sm font-bold text-blue-800",children:"Next Due Date"}),(0,a.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg w-fit mt-2",children:(0,a.jsx)(u.A,{className:"h-4 w-4 text-white"})})]}),(0,a.jsxs)(i.Wu,{className:"pt-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-900",children:T?(0,y.Yq)(T.dueDate):"N/A"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 font-bold",children:"Next payment due"})]})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-white shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,a.jsxs)(i.aR,{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-t-lg",children:[(0,a.jsx)(i.ZB,{className:"text-lg font-bold text-gray-900",children:"Current Invoices"}),(0,a.jsx)(i.BT,{className:"text-sm text-gray-600 font-semibold",children:"Your active invoices from the system"})]}),(0,a.jsx)(i.Wu,{className:"pt-6",children:v?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(x.A,{className:"h-8 w-8 animate-spin text-blue-600"})}):w?(0,a.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-800 font-medium",children:w})}):0===N.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(b.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 font-medium",children:"No invoices found"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-900",children:"Month"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-900",children:"Amount"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-900",children:"Due Date"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-bold text-gray-900",children:"Status"}),(0,a.jsx)("th",{className:"text-center py-3 px-4 font-bold text-gray-900",children:"Action"})]})}),(0,a.jsx)("tbody",{children:N.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"py-4 px-4 font-semibold text-gray-900",children:e.month}),(0,a.jsx)("td",{className:"py-4 px-4 font-bold text-gray-900",children:(0,y.vv)(Number(e.amount)||0)}),(0,a.jsx)("td",{className:"py-4 px-4 text-gray-600",children:(0,y.Yq)(e.dueDate)}),(0,a.jsx)("td",{className:"py-4 px-4",children:(0,a.jsx)(m.E,{className:(0,y.qY)(e.status),children:e.status})}),(0,a.jsx)("td",{className:"py-4 px-4 text-center",children:(0,a.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,a.jsxs)(d.$,{size:"sm",variant:"outline",onClick:()=>k(e.id),className:"border-blue-300 text-blue-600 hover:bg-blue-50",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"View"]}),("DUE"===e.status||"OVERDUE"===e.status)&&(0,a.jsx)(d.$,{size:"sm",onClick:()=>{k(e.id),S(!0)},className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-semibold",children:"\uD83D\uDCB3 Pay Now"})]})})]},e.id))})]})})})]}),C&&I&&(0,a.jsx)(U,{isOpen:C,onClose:()=>S(!1),invoice:N.find(e=>e.id===I)||{id:"",month:"",amount:0},upiId:(null==P?void 0:P.upiId)||"",upiName:(null==P?void 0:P.upiName)||""})]})})})}},88900:(e,t,s)=>{Promise.resolve().then(s.bind(s,48235))}},e=>{e.O(0,[8779,8405,9420,4939,1486,9290,622,1097,2432,7979,1899,4450,9744,2322,433,2652,3494,2574,2903,9173,558,1356,309,4191,2834,957,6691,1151,9473,1172,7650,3976,6292,5848,8861,2076,7358],()=>e(e.s=88900)),_N_E=e.O()}]);