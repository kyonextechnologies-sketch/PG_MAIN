(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4646],{14369:(e,s,t)=>{Promise.resolve().then(t.bind(t,23887))},23887:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>C});var l=t(95155),a=t(12115),n=t(5634),i=t(11829),r=t(86948),c=t(3998),o=t(75273),d=t(245),x=t(72649),m=t(6191),u=t(91761),h=t(6132),b=t(78519),g=t(57828),f=t(18085),j=t(39867),p=t(11010),v=t(71360),w=t(64269),N=t(68796),y=t(57760),k=t(46713);function C(){let[e,s]=(0,a.useState)(""),[t,C]=(0,a.useState)("ALL"),[D,A]=(0,a.useState)([]),[I,R]=(0,a.useState)(!1),[E,S]=(0,a.useState)(null),{invoices:L,loading:P,error:O,createInvoice:W,updateInvoice:Z,deleteInvoice:_}=(0,y.W)(),{tenants:B}=(0,k.x)(),{addNotification:U}=(0,N.j)(),V=L.filter(s=>{let l=s.id.toLowerCase().includes(e.toLowerCase())||s.month.toLowerCase().includes(e.toLowerCase()),a="ALL"===t||s.status===t;return l&&a}),M=V.filter(e=>"PAID"===e.status).reduce((e,s)=>e+s.amount,0),T=V.filter(e=>"DUE"===e.status||"OVERDUE"===e.status).reduce((e,s)=>e+s.amount,0),$=async e=>{E?await Z(E.id,e)&&U({type:"success",title:"Invoice Updated",message:"Invoice for ".concat(e.month," has been updated successfully."),read:!1}):await W(e)&&U({type:"success",title:"Invoice Created",message:"Invoice for ".concat(e.month," has been created successfully."),read:!1}),R(!1),S(null)},F=async e=>{L.find(s=>s.id===e)&&await _(e)&&U({type:"success",title:"Invoice Deleted",message:"Invoice has been deleted successfully.",read:!1})},z=e=>{U({type:"info",title:"View Invoice",message:"Viewing invoice details...",read:!1})},q=[{key:"month",label:"Month",sortable:!0},{key:"amount",label:"Amount",sortable:!0,render:e=>(0,w.vv)(e)},{key:"status",label:"Status",sortable:!0,render:e=>(0,l.jsx)(d.W,{status:e})},{key:"dueDate",label:"Due Date",sortable:!0},{key:"paidAt",label:"Paid Date",sortable:!0}];return(0,l.jsx)(i.m8,{role:"OWNER",children:(0,l.jsx)(n.O,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Billing"}),(0,l.jsx)("p",{className:"text-gray-700 font-medium",children:"Manage invoices and payments"})]}),(0,l.jsxs)(c.$,{onClick:()=>{S(null),R(!0)},className:"bg-purple-600 hover:bg-purple-700 text-white font-semibold shadow-lg",children:[(0,l.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Create Invoice"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)(r.Zp,{className:"bg-gradient-to-br from-green-50 to-green-100 shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,l.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ZB,{className:"text-sm font-bold text-green-800",children:"Total Revenue"}),(0,l.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,l.jsx)(u.A,{className:"h-4 w-4 text-white"})})]}),(0,l.jsxs)(r.Wu,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-green-900",children:(0,w.vv)(M)}),(0,l.jsx)("p",{className:"text-sm text-green-700 font-semibold",children:"From paid invoices"})]})]}),(0,l.jsxs)(r.Zp,{className:"bg-gradient-to-br from-orange-50 to-orange-100 shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,l.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ZB,{className:"text-sm font-bold text-orange-800",children:"Outstanding Dues"}),(0,l.jsx)("div",{className:"p-2 bg-orange-500 rounded-lg",children:(0,l.jsx)(h.A,{className:"h-4 w-4 text-white"})})]}),(0,l.jsxs)(r.Wu,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-orange-900",children:(0,w.vv)(T)}),(0,l.jsx)("p",{className:"text-sm text-orange-700 font-semibold",children:"Pending payments"})]})]}),(0,l.jsxs)(r.Zp,{className:"bg-gradient-to-br from-blue-50 to-blue-100 shadow-xl border-0 hover:shadow-2xl transition-all duration-300",children:[(0,l.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ZB,{className:"text-sm font-bold text-blue-800",children:"Total Invoices"}),(0,l.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,l.jsx)(b.A,{className:"h-4 w-4 text-white"})})]}),(0,l.jsxs)(r.Wu,{children:[(0,l.jsx)("div",{className:"text-3xl font-bold text-blue-900",children:L.length}),(0,l.jsx)("p",{className:"text-sm text-blue-700 font-semibold",children:"All invoices"})]})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,l.jsx)(x.Il,{data:[],title:"Revenue Trend",description:"Monthly revenue over time"}),(0,l.jsx)(x.km,{data:[],title:"Payment Status",description:"Distribution of payment statuses"})]}),I&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)(o.i$,{onSubmit:$,initialData:E,isEditing:!!E,tenants:B}),(0,l.jsx)("div",{className:"p-4 border-t",children:(0,l.jsx)(c.$,{variant:"outline",onClick:()=>{R(!1),S(null)},className:"w-full",children:"Close"})})]})}),(0,l.jsx)(d.b,{data:V,columns:q,onRowClick:z,actions:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center",onClick:()=>z(e),children:[(0,l.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"View Invoice"]}),"DUE"===e.status&&(0,l.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center",onClick:()=>(e.id,void U({type:"success",title:"Reminder Sent",message:"Payment reminder has been sent to the tenant.",read:!1})),children:[(0,l.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Send Reminder"]}),"PAID"===e.status&&e.receiptNo&&(0,l.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center",onClick:()=>{var s;return s=e.receiptNo,void U({type:"info",title:"Download Receipt",message:"Downloading receipt ".concat(s,"..."),read:!1})},children:[(0,l.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Download Receipt"]}),(0,l.jsxs)("button",{className:"w-full px-4 py-2 text-left hover:bg-gray-100 flex items-center",onClick:()=>{S(e),R(!0)},children:[(0,l.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,l.jsxs)("button",{className:"w-full px-4 py-2 text-left text-red-600 hover:bg-gray-100 flex items-center",onClick:()=>F(e.id),children:[(0,l.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Delete"]})]})})]})})})}}},e=>{e.O(0,[8779,8405,9420,4939,1486,9290,622,1097,2432,7979,1899,4450,9744,2322,433,2652,3494,2574,2903,9173,558,1356,309,4191,2834,957,6691,1151,9473,1172,7650,3976,6292,5848,8861,2076,7358],()=>e(e.s=14369)),_N_E=e.O()}]);